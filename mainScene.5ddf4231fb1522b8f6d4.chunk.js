"use strict";(self.webpackChunkphaser_test=self.webpackChunkphaser_test||[]).push([[394],{215:(s,e,t)=>{t.r(e),t.d(e,{default:()=>i});var a=t(12);const o=()=>({x:Math.floor(Math.random()*a.P),y:Math.floor(Math.random()*a.C)});class i extends Phaser.Scene{constructor(){super({key:"MainScene"}),this.ships=[]}preload(){this.load.image("spaceship","assets/img/spaceship.png"),this.load.image("space","assets/img/testbild.jpg"),this.load.image("bg","assets/img/space_bg.jpg")}create(){this.cameras.main.setBounds(0,0,a.P,a.C),this.cameras.main.centerOn(a.P/2,a.C/2),this.physics.world.setBounds(0,0,a.P,a.C),this.space=this.add.image(0,0,"bg").setOrigin(0),this.addShips(),this.addScrolling(),this.loadLayers()}update(){for(let t=0;t<10;t++){const{ship:a,target:i}=this.ships[t];if(a.body.speed>0)Phaser.Math.Distance.Between(a.x,a.y,i.x,i.y)<4&&a.body.reset(i.x,i.y);else{const i=o(),h=Phaser.Math.Angle.Between(a.x,a.y,i.x,i.y);this.ships[t].target=i,a.setAngle(Phaser.Math.RadToDeg(h)+90),this.physics.moveToObject(a,i,(s=12,e=40,s=Math.ceil(s),e=Math.floor(e),Math.floor(Math.random()*(e-s))+s))}}var s,e}loadLayers(){t.e(16).then(t.bind(t,295)).then((s=>{this.scene.add("TestScene",s.default,!0)})),t.e(444).then(t.bind(t,426)).then((s=>{this.scene.add("DebugScene",s.default,!0)}))}addShips(){for(let s=0;s<10;s++){const{x:s,y:e}=o(),t=this.physics.add.image(s,e,"spaceship").setScale(.06).setOrigin(.5);this.ships.push({ship:t,target:{x:s,y:e}})}}addScrolling(){const s=this.cameras.main;this.input.on("wheel",((e,t,a,o)=>{if(o>0){const e=s.zoom-.004;e>=1.5&&(s.zoom=e)}if(o<0){const e=s.zoom+.004;e<1.8&&(s.zoom=e)}})),this.rexGestures.add.pinch().on("drag1",(({drag1Vector:e})=>{const t=s.scrollX-e.x/s.zoom,a=s.scrollY-e.y/s.zoom;t>=0&&(s.scrollX=t),a>=0&&(s.scrollY=a),console.log("drag1Vector",e,s.scrollX,s.scrollY)})).on("pinch",(function({scaleFactor:e}){console.log("pinch",e),s.zoom*=e}),this)}}}}]);