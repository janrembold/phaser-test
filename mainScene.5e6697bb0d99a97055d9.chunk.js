"use strict";(self.webpackChunkphaser_test=self.webpackChunkphaser_test||[]).push([[394],{215:(e,s,t)=>{t.r(s),t.d(s,{default:()=>h});var a=t(12);const i=()=>({x:Math.floor(Math.random()*a.P),y:Math.floor(Math.random()*a.C)});class h extends Phaser.Scene{constructor(){super({key:"MainScene"}),this.ships=[]}preload(){this.load.image("spaceship","assets/img/spaceship.png"),this.load.image("space","assets/img/testbild.jpg"),this.load.image("bg","assets/img/space_bg.jpg")}create(){this.cameras.main.setBounds(0,0,a.P,a.C),this.cameras.main.centerOn(a.P/2,a.C/2),this.physics.world.setBounds(0,0,a.P,a.C),this.space=this.add.image(0,0,"bg").setOrigin(0),this.addShips(),this.setupDrag(),this.setupScrollwheel(),this.setupPinch(),this.loadLayers()}update(){for(let t=0;t<10;t++){const{ship:a,target:h}=this.ships[t];if(a.body.speed>0)Phaser.Math.Distance.Between(a.x,a.y,h.x,h.y)<4&&a.body.reset(h.x,h.y);else{const h=i(),n=Phaser.Math.Angle.Between(a.x,a.y,h.x,h.y);this.ships[t].target=h,a.setAngle(Phaser.Math.RadToDeg(n)+90),this.physics.moveToObject(a,h,(e=12,s=40,e=Math.ceil(e),s=Math.floor(s),Math.floor(Math.random()*(s-e))+e))}}var e,s}loadLayers(){t.e(16).then(t.bind(t,295)).then((e=>{this.scene.add("TestScene",e.default,!0)})),t.e(444).then(t.bind(t,426)).then((e=>{this.scene.add("DebugScene",e.default,!0)}))}addShips(){for(let e=0;e<10;e++){const{x:e,y:s}=i(),t=this.physics.add.image(e,s,"spaceship").setScale(.06).setOrigin(.5);this.ships.push({ship:t,target:{x:e,y:s}})}}setupScrollwheel(){const e=this.cameras.main;this.input.on("wheel",((s,t,a,i)=>{const h=document.getElementById("resize");if(h&&(h.innerHTML="WHEEL"),i>0){const s=e.zoom-.004;s>=1&&(e.zoom=s)}if(i<0){const s=e.zoom+.004;s<1.8&&(e.zoom=s)}}))}setupPinch(){const e=this.cameras.main;this.rexGestures.add.pinch().on("pinch",(({scaleFactor:s})=>{console.log("pinch",s);const t=document.getElementById("resize");t&&(t.innerHTML=`PINCH ${s}`),e.zoom*=s}),this)}setupDrag(){const e=this.cameras.main;this.rexGestures.add.pinch().on("drag1",(({drag1Vector:s})=>{const t=document.getElementById("resize");t&&(t.innerHTML="DRAG");const a=e.scrollX-s.x/e.zoom,i=e.scrollY-s.y/e.zoom;a>=0&&(e.scrollX=a),i>=0&&(e.scrollY=i)}))}}}}]);