"use strict";(self.webpackChunkphaser_test=self.webpackChunkphaser_test||[]).push([[394],{215:(e,s,t)=>{t.r(s),t.d(s,{default:()=>o});var a=t(12);const i=()=>({x:Math.floor(Math.random()*a.Pg),y:Math.floor(Math.random()*a.CL)});class o extends Phaser.Scene{constructor(){super({key:"MainScene"}),this.ships=[]}preload(){this.load.image("spaceship","assets/img/spaceship.png"),this.load.image("space","assets/img/testbild.jpg"),this.load.image("bg","assets/img/space_bg.jpg")}create(){this.cameras.main.setBounds(0,0,a.Pg,a.CL),this.cameras.main.centerOn(a.Pg/2,a.CL/2),this.physics.world.setBounds(0,0,a.Pg,a.CL),this.space=this.add.image(0,0,"bg").setOrigin(0),this.addShips(),this.setupDrag(),this.setupScrollwheel(),this.setupPinch(),this.loadLayers(),window.addEventListener("game-resize",(()=>this.resize()))}update(){for(let t=0;t<10;t++){const{ship:a,target:o}=this.ships[t];if(a.body.speed>0)Phaser.Math.Distance.Between(a.x,a.y,o.x,o.y)<4&&a.body.reset(o.x,o.y);else{const o=i(),n=Phaser.Math.Angle.Between(a.x,a.y,o.x,o.y);this.ships[t].target=o,a.setAngle(Phaser.Math.RadToDeg(n)+90),this.physics.moveToObject(a,o,(e=12,s=40,e=Math.ceil(e),s=Math.floor(s),Math.floor(Math.random()*(s-e))+e))}}var e,s}resize(){const e=this.cameras.main;e.zoom>=a.sZ&&(e.zoom=a.sZ),e.zoom<a.Zj&&(e.zoom=a.Zj)}loadLayers(){t.e(16).then(t.bind(t,295)).then((e=>{this.scene.add("TestScene",e.default,!0)})),t.e(444).then(t.bind(t,426)).then((e=>{this.scene.add("DebugScene",e.default,!0)}))}addShips(){for(let e=0;e<10;e++){const{x:e,y:s}=i(),t=this.physics.add.image(e,s,"spaceship").setScale(.06).setOrigin(.5);this.ships.push({ship:t,target:{x:e,y:s}})}}setupScrollwheel(){const e=this.cameras.main;this.input.on("wheel",((s,t,i,o)=>{const n=document.getElementById("resize");if(n&&(n.innerHTML="WHEEL"),o>0){const s=e.zoom-.04;s>=a.sZ&&(e.zoom=s)}if(o<0){const s=e.zoom+.04;s<a.Zj&&(e.zoom=s)}}))}setupPinch(){const e=this.cameras.main;this.rexGestures.add.pinch().on("pinch",(({scaleFactor:s})=>{const t=e.zoom*s;console.log("pinch",s);const i=document.getElementById("resize");i&&(i.innerHTML=`PINCH ${t}`),t>=a.sZ&&t<a.Zj&&(e.zoom=t)}),this)}setupDrag(){const e=this.cameras.main;this.rexGestures.add.pinch().on("drag1",(({drag1Vector:s})=>{const t=document.getElementById("resize");t&&(t.innerHTML="DRAG");const a=e.scrollX-s.x/e.zoom,i=e.scrollY-s.y/e.zoom;a>=0&&(e.scrollX=a),i>=0&&(e.scrollY=i)}))}}}}]);